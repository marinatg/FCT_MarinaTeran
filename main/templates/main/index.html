{% extends 'base.html' %}
{% load i18n %}

{% block content %}


    <div class="container">
  <div class="row">

    <div class="col-3 ">

        <h3 class="col-md-9 text-center">Filtrar por:</h3><br>
        <form method="get">
            <div class="col-md-9 text-center">
            <input type="text" placeholder="Buscar producto..." name="buscar" style="width: 200px; height: 35px; border-radius: 10px;">
            </div>
            <p></p>
            <div class="col-md-9 text-center">
            <button class="btn btn-info mb-3" type="submit">Buscar</button>
            </div>
        </form>

        <form method="get">
            <h5 class="col-md-9 text-center">Disponibilidad:</h5>
            <div class="col-md-9 text-center mb-3">
             <input type="radio" id="todos" name="disponibilidad" value="2" {% if not disponible or disponible == '2' %}checked{% endif %}>
            <label for="todos">Todos</label><br>

            <input type="radio" id="disponibles" name="disponibilidad" value="1" {% if disponible == '1' %}checked{% endif %}>
            <label for="disponibles">Con entradas disponibles</label><br>

            <input type="radio" id="noDisponibles" name="disponibilidad" value="0" {% if disponible == '0' %}checked{% endif %}>
            <label for="noDisponibles">Sin entradas disponibles</label><br>
            </div>

            <h5 class="col-md-9 text-center mt-3">Fecha:</h5>
            <div class="col-md-9 text-center">
                <label for="fecha">Desde:</label><br>
                <input type="date" id="fecha" name="fecha" value="{{ fechaInicio }}">
            </div>
            <p></p>
            <div class="col-md-9 text-center">
                <label for="fecha2">Hasta:</label><br>
                <input type="date" id="fecha2" name="fecha2" min="" value="{{ fechaFin }}">
            </div>
            <p></p>
            <div class="col-md-9 text-center mt-3">
            <button class="btn btn-info mb-3" type="submit">Aplicar filtros</button>
            </div>

            <script>
                const fechaInput = document.getElementById('fecha');
                const fecha2Input = document.getElementById('fecha2');
                fecha2Input.min = fechaInput.value;
                fechaInput.addEventListener('input', function() {
                    fecha2Input.min = fechaInput.value;
                });
            </script>

        </form>

    </div>
      <div class="col-1"></div>
    <div class="col-6">
        <h3 class="col-md-9 text-center p-2">Listado de conciertos</h3>
        {% for x in evento %}
            <div class="card mb-5" style="width: 28rem;">
                <!--<a id="listadoEventos" href="#" class="card-img-top"><img src="{{ Evento.imagen.url }}" alt="{{ Evento.nombre }}"></a>-->
                <a id="evento" href="{% url 'eventoDetalle' pk=x.id %}" role="button"><img class="card-img-top" src="{{ x.imagen.url }}" alt="{{ x.nombre }}"> </a>
              <div class="card-body" style="background-color: #cdb4db;">
                <h5 class="card-title">{{x.nombre}}</h5>
                <h6>{{x.fecha_hora}}</h6>
                <p class="card-text">Quedan {{x.disponibles}} entradas disponibles</p>
                    {% if x.fecha_hora < ahora %}
                    <p style="color: red;">El evento ya no est√° disponible.</p>
                    {% else %}
                    <a href="{% url 'eventoDetalle' pk=x.id %}" class="btn btn-info">Comprar entradas</a>
                    {% endif %}
              </div>
            </div>
        {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
